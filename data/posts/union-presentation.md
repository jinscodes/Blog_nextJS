![1](https://github.com/jinscodes/Blog_nextJS/assets/87598134/954744e0-3b74-43b6-a70b-b20163bf526a)

❓ **CSR** & **SSG** & **SSR** & **ISR** ❓

## CSR (Client Side Rendering)

> 랜더링하는 주체가 클라이언트인 렌더링 방식

### CSR 작동 방식

1. 클라이언트가 서버에 요청을 보냄

   1. (이때 브라우저는 요청을 기다리는 동안 로딩바를 보여줌)

2. 요청을 받은 서버는 HTML 파일을 넘겨줌

   1. (서버에서 받은 HTML 파일은 비어 있음)
   2. (기본적인 <head>와 <description>만 담겨있음)
   3. (<body>는 비어있음)
   4. => 즉, 클라이언트가 파일을 받은 후 처음 보게 되는 화면은 빈 화면임

3. 소스 파일 다운로드

   1. (먼저 React 소스 파일을 다운로드)
   2. (개발자의 컴포넌트 등 소스코드를 다운)
   3. => 모든 소스 코드가 다운되면 클라이언트에 보여줄 준비 완료

4. React 소스 코드 로드 및 React 실행

5. index.html의 <div class="root">에 연결
   1. (구성요소를 DOM 요소로 변환)
   2. (변환된 DOM 요소를 브라우저에 페인팅)

### CSR의 장점

1. 페이지 로딩 후 빠른 UX 제공 가능

   1. 일단 로딩이 완료 되면 버튼을 누르는 등 렌더링이 필요할 때 전체 페이지를 렌더링 하는 것이 아니라 부분적으로 데이터를 요청하고 부분적인 응답을 받아 페이지를 부분적으로 업데이트 하기 때문

2. 낮은 서버 부하
   1. 부분적으로 데이터가 요청되고 이에 응답하기 때문에 서버 부담이 줄어듬

### CSR의 단점

1. 페이지 로딩 시간(TTV)이 길다 === FCP에 시간이 오래 걸린다

   1. TTV는 "Time To View"의 약어로, 사용자가 처음으로 페이지를 보는 데 걸리는 시간을 의미합니다.
   2. FCP는 "First Contentful Paint"의 약자로 의미 있는 페인트를 브라우저에 표시하는 시간을 의미합니다.

2. 자바스크립트 활성화가 필요

   1. 자바스크립트가 비활성화 되면 사용자는 첫 페이지조차 볼 수 없음
   2. 또한, 웹 페이지가 정상 작동하지 않음
   3. SEO 최적화가 어려움

3. 보안에 취약함

   1. 모든 코드를 클라이언트에 다운로드하고 클라이언트에서 실행하기 때문

4. CDN에 캐시되지 않음
   1. HTML 파일은 기본적으로 비어있는 채로 서버에 올라가고, 클라이언트에서 react 또는 js 소스파일을 다운로드해야하기 때문에 HTML을 CDN에 캐시하기 어려움
   2. (CDN은 "콘텐츠 전송 네트워크")

### 요약

1️⃣ React 실행 시 서버에 요청을 보내고, 빈 HTML 파일을 받기 위해 로딩 바가 회전하는 동안 응답을 받습니다.

2️⃣ 처음 받은 HTML 파일에는 <div class="root"> 만 있어서 빈 화면이 나옵니다.

3️⃣ React 소스와 JS 소스를 받은 후 화면 공개

## SSG (Static Site Generation)

> 렌더링의 주체가 서버이고, 파일을 빌드할 때 렌더링되는 방식

### SSG 작동 방식

1. 실행 및 배포하기 전에 파일을 빌드

2. 빌드하는 동안 코드가 렌더링되고 변환

   1. 서버에서 먼저 코드 실행
   2. React로 작성된 코드를 HTML로 변환
      1. 파일 빌드 시 서버에서 DB를 읽어오거나 클라우드 DB를 읽어 페이지를 만드는 작업 수행
      2. 서버에서는 필요하느 코드를 실행하고 태그를 브라우저에 표시. 이는 실제 HTML 파일을 작성할 대 HTML이 이미 생성되었음을 의미
   3. => 즉, 정적인, 비동적인 사이트를 만드는 것

3. 빌드가 완료되면 완성된 페이지가 서버에 저장

4. 클라이언트가 페이지를 요청하면 로딩 바가 표시됩니다.

5. 서버는 이미 서버에 만들어진 파일에 응답합니다.

6. 클라이언트는 브라우저에 페이지를 표시합니다.

7. 페이지가 응답하면 사용자가 해당 페이지에 다시 접속하더라도 클라이언트(사용자)는 서버에 동일한 요청을 하지 않고도 CDN에서 캐시된 HTML 파일을 가져올 수 있습니다.

### SSG 장점

1. 페이지 로딩 시간이 짧음

   1. 이미 서버에 생성된 HTML 파일을 가져오고, 다른 JS 파일을 다운로드하지 않기 때문에 TTV가 빠름

2. 자바스크립트가 필요하지 않음

   1. 서버에 완성된 페이지가 있기 때문

3. SEO 최적화에 좋음

   1. 완성된 페이지는 서버에 올라가면서 웹 노출에 최적화 되어 있음

4. 보안 우수

5. CDN에 캐시됨

### SSG 단점

1. 데이터는 정적임

   1. 이미 화면에 생성된 페이지를 인쇄할 뿐 동적으로 데이터를 삽입할 수 없음

2. 사용자별 정보 제공의 어려움
   1. 데이터를 동적으로 가져올 수 없어 사용자별 정보 제공이 어려움

## ISR (Incremental Static Regeneration)

> 렌더링 주체가 서버이고 파일이 주기적으로 렌더링 되는 방식을 가리키는 단어

### ISR 작동 방식

1. SSG와 동일

2. 주기적으로 렌더링하여 새 페이지 생성
   1. 데이터 변경 등 변경 사항이 발생한 경우 페이지에 적용

### ISR의 장점

1. SSG의 장점을 그대로 유지
2. 주기적으로 업데이트 되는 데이터

### ISR의 단점

1. 실시간 데이터가 아님

   1. 데이터는 실시간이 아니기 때문에 클라이언트는 데이터 변경 여부를 알 수 없음
   2. 클라이언트는 렌더링 기간을 기다린 후 페이지를 다시 로드한 후 변경된 데이터를 확인할 수 있음

2. 사용자별 정보 제공의 어려움
   1. SSG보다 주기적으로 업데이트되는 정보를 확인할 수 있지만 여전히 사용자별 데이터를 반영할 수 없음

## SSR (Server Side Rendering)

> 렌더링 주체가 서버이며 요청시마다 렌더링 되는 방식

### SSR 작동 방식

※ 배포한 Next.js + React 형식의 파일이 있다고 가정합니다.

1. 클라이언트가 서버에 페이지를 요청

2. 요청된 서버는 필요한 코드를 실행함

   1. DB나 클라우드의 데이터라면 서버가 모든 처리를 해준다

3. HTML 파일을 생성하여 서버로부터 요청이 수신되면 클라이언트에 보냄

### SSR의 장점

1. SSG 및 ISR과 동일한 장점이 있습니다

   1. CDN 캐시 장점 제외

2. 실시간 데이터 사용

   1. 항상 최신 데이터를 반영하는 HTML 파일 가져오기

3. 사용자가 요구하는 데이터를 활용
   1. 요청될 때마다 렌더링 되므로 요청한 사람에 따라 사용자에게 적합한 데이터를 사용할 수 있음

### SSR의 단점

1. 상대적으로 느림

   1. SSG나 ISR처럼 생성된 HTML파일을 단순히 전송하는 것이 아니라, 요청 시 HTML 파일을 생성하기 때문에 상대적으로 느림

2. 서버가 과부하 될 수 있음

   1. 사용자가 1000명, 10000명 등 사용자가 많아질 수록 요청한 페이지가 많아지고, 요청받은 페이지를 모두 생성해야하기 때문에 서버에 과부하가 걸릴 수 있음
   2. 이 문제로 인해 사용자가 웹사이트에 엑세스하는 시간이 늘어남
   3. (이러한 현상을 오버헤드라고 함)

3. CDN에 캐시할 수 없음
   1. 클라이언트가 요청할 때 페이지가 만들어지기 때문에 CDN에 캐시할 수 없음
